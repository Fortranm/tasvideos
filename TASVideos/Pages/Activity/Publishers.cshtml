@page "{userName}"
@model PublishersModel
@{
	ViewData.SetTitle($"Publisher Activity for {Model.UserName}");
	var total = Model.Publications.Count;

	var classCounts = Model.Publications
		.GroupBy(p => p.Class)
		.ToDictionary(tkey => tkey.Key, tvalue => tvalue.Count());
}
@section PageTitle {
	<div class="container mb-2">
		<h1 class="card card-header d-block">
			Publisher <a asp-page="/Activity/Index">Activity</a> for <profile-link username="@Model.UserName"></profile-link>
		</h1>
	</div>
}

<label>Total: @total</label>
@foreach (var c in classCounts)
{
	<div>@c.Key: @c.Value</div>
}

<standard-table class="mt-2">
	<tr>
		<th>Date</th>
		<th>Publication</th>
		<th>Class</th>
	</tr>
	@foreach (var pub in Model.Publications.OrderByDescending(p => p.Id))
	{
		<tr>
			<td>
				<timezone-convert asp-for="@pub.CreateTimestamp" date-only="true" />
			</td>
			<td>
				<pub-link id="pub.Id">[@pub.Id] @pub.Title</pub-link><br />
			</td>
			<td>
				@pub.Class
			</td>
		</tr>
	}
</standard-table>
